//å°æ‰£å‡ºå»ç§‹æ¸¸ï¼Œé€”ä¸­æ”¶é›†äº†ä¸€äº›çº¢å¶å’Œé»„å¶ï¼Œä»–åˆ©ç”¨è¿™äº›å¶å­åˆæ­¥æ•´ç†äº†ä¸€ä»½ç§‹å¶æ”¶è—é›† `leaves`ï¼Œ å­—ç¬¦ä¸² `leaves` ä»…åŒ…å«å°å†™å­—ç¬¦ `r` å’Œ `
//y`ï¼Œ å…¶ä¸­å­—ç¬¦ `r` è¡¨ç¤ºä¸€ç‰‡çº¢å¶ï¼Œå­—ç¬¦ `y` è¡¨ç¤ºä¸€ç‰‡é»„å¶ã€‚
//å‡ºäºç¾è§‚æ•´é½çš„è€ƒè™‘ï¼Œå°æ‰£æƒ³è¦å°†æ”¶è—é›†ä¸­æ ‘å¶çš„æ’åˆ—è°ƒæ•´æˆã€Œçº¢ã€é»„ã€çº¢ã€ä¸‰éƒ¨åˆ†ã€‚æ¯éƒ¨åˆ†æ ‘å¶æ•°é‡å¯ä»¥ä¸ç›¸ç­‰ï¼Œä½†å‡éœ€å¤§äºç­‰äº 1ã€‚æ¯æ¬¡è°ƒæ•´æ“ä½œï¼Œå°æ‰£å¯ä»¥å°†ä¸€ç‰‡çº¢å¶æ›¿
//æ¢æˆé»„å¶æˆ–è€…å°†ä¸€ç‰‡é»„å¶æ›¿æ¢æˆçº¢å¶ã€‚è¯·é—®å°æ‰£æœ€å°‘éœ€è¦å¤šå°‘æ¬¡è°ƒæ•´æ“ä½œæ‰èƒ½å°†ç§‹å¶æ”¶è—é›†è°ƒæ•´å®Œæ¯•ã€‚
//
//**ç¤ºä¾‹ 1ï¼š**
//>è¾“å…¥ï¼š`leaves = "rrryyyrryyyrr"`
//>
//>è¾“å‡ºï¼š`2`
//>
//>è§£é‡Šï¼šè°ƒæ•´ä¸¤æ¬¡ï¼Œå°†ä¸­é—´çš„ä¸¤ç‰‡çº¢å¶æ›¿æ¢æˆé»„å¶ï¼Œå¾—åˆ° "rrryyyyyyyyrr"
//
//**ç¤ºä¾‹ 2ï¼š**
//>è¾“å…¥ï¼š`leaves = "ryr"`
//>
//>è¾“å‡ºï¼š`0`
//>
//>è§£é‡Šï¼šå·²ç¬¦åˆè¦æ±‚ï¼Œä¸éœ€è¦é¢å¤–æ“ä½œ
//
//**æç¤ºï¼š**
//- `3 <= leaves.length <= 10^5`
//- `leaves` ä¸­åªåŒ…å«å­—ç¬¦ `'r'` å’Œå­—ç¬¦ `'y'` ğŸ‘ 106 ğŸ‘ 0

#include "header.h"

namespace LeetCodeLCP19 {

//leetcode submit region begin(Prohibit modification and deletion)
class Solution {
public:
    int minimumOperations(string leaves) {
      return solution2(leaves);
    }

    // dp
    // O( N ), O( N )
    int solution1(string leaves) {
      int n = leaves.size();
      // çŠ¶æ€ 0: è¡¨ç¤ºå‰ä¸€éƒ¨åˆ†çš„çº¢ï¼Œ 1: é»„è‰²ï¼Œ 2: åä¸€éƒ¨åˆ†çš„çº¢
      vector<vector<int>> f(n, vector<int>(3));  // ä¸€ç»´è¡¨ç¤ºå¶å­ï¼ŒäºŒç»´è¡¨ç¤ºçŠ¶æ€
      f[0][0] = (leaves[0] == 'y');  // ç¬¬ä¸€ä¸ªå¶å­ï¼ŒçŠ¶æ€éœ€è¦ä¸º0ï¼Œæ‰€ä»¥åˆ¤æ–­ leaves[0] å¦‚æœæ˜¯é»„ï¼Œåˆ™éœ€è¦å˜
      f[0][1] = f[0][2] = f[1][2] = INT32_MAX;  // ä¸å¯èƒ½çš„å€¼

      for (int i = 1; i < n; ++i) {
        int isRed = (leaves[i] == 'r');
        int isYellow = (leaves[i] == 'y');
        f[i][0] = f[i-1][0] + isYellow;  // å¦‚æœiå¶å­çŠ¶æ€æ˜¯0ï¼Œåˆ™å‰ä¸€ä¸ªå¶å­çŠ¶æ€ä¹Ÿå¿…é¡»æ˜¯0ï¼Œå¹¶åˆ¤æ–­æ˜¯å¦éœ€è¦å˜
        f[i][1] = min(f[i-1][0], f[i-1][1]) + isRed;  // å‰ä¸€ä¸ªå¶å­å¯ä»¥æ˜¯0ï¼Œ1ï¼Œå¦‚æœæ˜¯çº¢åˆ™éœ€è¦å˜
        if (i >= 2)
          f[i][2] = min(f[i-1][1], f[i-1][2]) + isYellow;
      }
      return f[n-1][2];
    }

    // å¯¹ solution1 åšç©ºé—´ä¼˜åŒ–
    int solution2(string leaves) {
      vector<int> f(3);
      f[0] = (leaves[0] == 'y');
      f[1] = f[2] = 9999; // i å¿…é¡»å¤§äºç­‰äº j + 1
      for (int i = 1; i < leaves.size(); ++i) {
        int isRed = (leaves[i] == 'r');
        int isYellow = (leaves[i] == 'y');
        f[2] = min(f[1], f[2]) + isYellow;
        f[1] = min(f[0], f[1]) + isRed;
        f[0] =  f[0] + isYellow;
      }
      return f[2];
    }
};
//leetcode submit region end(Prohibit modification and deletion)

}