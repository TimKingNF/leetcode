-- ç¼–å†™ä¸€ä¸ª SQL æŸ¥è¯¢æ¥å®žçŽ°åˆ†æ•°æŽ’åã€‚ 
-- 
--  å¦‚æžœä¸¤ä¸ªåˆ†æ•°ç›¸åŒï¼Œåˆ™ä¸¤ä¸ªåˆ†æ•°æŽ’åï¼ˆRankï¼‰ç›¸åŒã€‚è¯·æ³¨æ„ï¼Œå¹³åˆ†åŽçš„ä¸‹ä¸€ä¸ªåæ¬¡åº”è¯¥æ˜¯ä¸‹ä¸€ä¸ªè¿žç»­çš„æ•´æ•°å€¼ã€‚æ¢å¥è¯è¯´ï¼Œåæ¬¡ä¹‹é—´ä¸åº”è¯¥æœ‰â€œé—´éš”â€ã€‚ 
-- 
--  +----+-------+
-- | Id | Score |
-- +----+-------+
-- | 1  | 3.50  |
-- | 2  | 3.65  |
-- | 3  | 4.00  |
-- | 4  | 3.85  |
-- | 5  | 4.00  |
-- | 6  | 3.65  |
-- +----+-------+
--  
-- 
--  ä¾‹å¦‚ï¼Œæ ¹æ®ä¸Šè¿°ç»™å®šçš„ Scores è¡¨ï¼Œä½ çš„æŸ¥è¯¢åº”è¯¥è¿”å›žï¼ˆæŒ‰åˆ†æ•°ä»Žé«˜åˆ°ä½ŽæŽ’åˆ—ï¼‰ï¼š 
-- 
--  +-------+------+
-- | Score | Rank |
-- +-------+------+
-- | 4.00  | 1    |
-- | 4.00  | 1    |
-- | 3.85  | 2    |
-- | 3.65  | 3    |
-- | 3.65  | 3    |
-- | 3.50  | 4    |
-- +-------+------+
--  
-- 
--  é‡è¦æç¤ºï¼šå¯¹äºŽ MySQL è§£å†³æ–¹æ¡ˆï¼Œå¦‚æžœè¦è½¬ä¹‰ç”¨ä½œåˆ—åçš„ä¿ç•™å­—ï¼Œå¯ä»¥åœ¨å…³é”®å­—ä¹‹å‰å’Œä¹‹åŽä½¿ç”¨æ’‡å·ã€‚ä¾‹å¦‚ `Rank` 
--  ðŸ‘ 689 ðŸ‘Ž 0

# è§£æ³•ä¸€
SELECT
    Score, DENSE_RANK() OVER(ORDER BY Score DESC) AS 'Rank'
FROM
    Scores
;

# è§£æ³•äºŒ
# ä¸»è¦å°±æ˜¯ åŽ»é‡ä¹‹åŽå¤§äºŽå…¶å€¼çš„ä¸ªæ•°ï¼Œå°±æ˜¯å…¶æŽ’å
select a.Score as Score,
   (select count(distinct b.Score) from Scores b where b.Score >= a.Score) as "Rank"
from Scores a
order by a.Score DESC
;